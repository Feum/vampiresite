<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Vampiri Live CdC</title>
    <link rel="stylesheet" type="text/css" href="style.css"/>
</head>
<body>
      <table class="parent">
          <tr>
              <td style="width:49%; height: 100%;">
                  <img id="foro" class="popup" src="foro.png" style="position: absolute;"  /> 
                 

                  <img id="book" class="icon" src="bookicon.png" style="position: absolute; top: 100px; left: 100px;"  />   
                  <img id="bookup" class="popup" src="booktext.png" style="position: absolute; top: 74px; left: 60px;"  />
  
                  <img id="intro" class="icon" src="loreicon.png" style="position: absolute; top: 100px; left: 300px;"  />
                  <img id="introup" class="popup" src="loretext.png" style="position: absolute; top: 74px; left: 238px;"  />  

                  <img id="dadi" class="icon" src="ruleicon.png" style="position: absolute; top: 300px; left: 100px;"  />
                  <img id="dadiup" class="popup" src="ruletext.png" style="position: absolute; top: 257px; left: 57px;"  />
  
                  <img id="pad" class="icon" src="playicon.png" style="position: absolute; top: 270px; left: 270px;"  />
                  <img id="padup" class="popup" src="playtext.png" style="position: absolute; top: 252px; left: 242px;"  />

                  <img id="pg" class="icon" src="pgicon.png" style="position: absolute; top: 450px; left: 175px;"  />
                  <img id="pgup" class="popup" src="pgtext.png" style="position: absolute; top: 454px; left: 134px;"  />
          
                   
             </td>

             <td style="width: 51%; height: 100%; left: 400px; top: 0px;">
              <!--TABELLA -->
                <table style="align-content:stretch; width:100%; height:75%;" >

                    <!--RIGA 1 -->  
                    <tr>
                        <td>      
                            <h1 onclick="document.getElementById('pg').click(); document.getElementById('riga3').click();" id="riga1" class="titolo">Accedi all'Area Privata</h1> 
                        </td>
                    </tr>

                    <!--RIGA 2 -->
                    <tr>
                        <td> 
                            <h1 id="riga2" class="titolo">Eventi</h1> 
                        </td>
                    </tr>

                    <!--RIGA 3 -->
                     <tr>
                        <td> 
                            <h1 id="riga3" class="titolo">Comunicazioni Off-Game</h1> 
                        </td>
                    </tr>

                    <!--RIGA 4 -->
                     <tr>
                        <td> 
                            <h1 id="riga4" class="titolo">Comunicazioni In-Game</h1> 
                        </td>
                    </tr>

                    <!--RIGA 5 -->
                     <tr>
                        <td> 
                            <h1 id="riga5" class="titolo">I Fratelli di Tifernum</h1> 
                        </td>
                    </tr>

                    <!--RIGA 6 -->
                     <tr>
                        <td> 
                            <h1 id="riga6" class="titolo">Changelog</h1> 
                        </td>
                    </tr>

                </table>
          </td>

        </tr>
</table>
    
 <!--MODALLOGIN-->

<div id="id01" class="modal">
  
  <div class="modal-content animate">
    <div class="imgcontainer">
      <span onclick="document.getElementById('id01').style.display='none'" class="close" title="Close Modal">&times;</span>
      <img src="img_avatar2.png" alt="Avatar" class="avatar">
    </div>

    <div class="container">
      <label for="uname"><b>Username</b></label>
      <input id="uname" type="text" placeholder="Enter Username" name="uname" required>

      <label for="psw"><b>Password</b></label>
      <input id="psw" type="password" placeholder="Enter Password" name="psw" required>
        
      <button id="sub" type="submit">Login</button>
      <label>
        <input id="remember" type="checkbox" checked="checked" name="remember"> Remember me
      </label>
    </div>

    <div class="container" style="background-color:#f1f1f1">
      <button type="button" onclick="document.getElementById('id01').style.display='none'" class="cancelbtn">Cancel</button>
      <span class="psw">Password dimenticata? <a onclick="firebase.auth().sendPasswordResetEmail(getElementById('uname').value).then(function () {
                alert('Una mail di reset è stata inviata a ' + getElementById('uname').value);
            }, function (error) {
                alert(error.message);
            });" href="#">Scrivi solo la tua e-mail e clicca qui.</a></span>
    </div>
  </div>
</div>

<script src="https://www.gstatic.com/firebasejs/5.0.4/firebase.js"></script>
<script>
    // Initialize Firebase
    var config = {
        apiKey: "", /*cut from github version*/
        authDomain: "vampiri-live-cdc.firebaseapp.com",
        databaseURL: "https://vampiri-live-cdc.firebaseio.com",
        projectId: "vampiri-live-cdc",
        storageBucket: "vampiri-live-cdc.appspot.com",
        messagingSenderId: "" /*cut from github version*/
    };
    firebase.initializeApp(config);

    var submit = document.getElementById("sub");
    submit.onclick = function () {
        var mail = document.getElementById("uname").value;
        var pass = document.getElementById("psw").value;

        if (document.getElementById("remember").value)
            firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL);
        else
            firebase.auth().setPersistence(firebase.auth.Auth.Persistence.SESSION);

        firebase.auth().signInWithEmailAndPassword(mail, pass).then(function () {
            alert("Logged In!");
            document.getElementById('id01').style.display = 'none';
            document.getElementById("pg").click();
            
        }, function (error) {
            // Handle Errors here.
            var errorCode = error.code;
            var errorMessage = error.message;
            // ...
            alert(errorMessage);
        });



        
    }

    var user = firebase.auth().currentUser;
    if (neverclicked)
        if (user) {

        } else {
            document.getElementById("riga1").innerHTML = "Login";
            document.getElementById("riga1").onclick = function () { document.getElementById('id01').style.display = 'block'; }
        }


</script>
<script src="scripts.js"></script> 
</body>
</html>